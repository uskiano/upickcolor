var upickcolor;(()=>{"use strict";var t={201:(t,e)=>{function n(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}Object.defineProperty(e,"__esModule",{value:!0}),e.Debouncer=void 0;var i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.clickCounter=0,this.timerId=null}var e,i;return e=t,(i=[{key:"debounce",value:function(t,e){window.clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout(t,e)}},{key:"cancel",value:function(){window.clearTimeout(this.debounceTimer)}},{key:"debounceClicks",value:function(t,e,n,i){var o=this;this.clickCounter++,window.clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout((function(i){1===o.clickCounter?e(t):n(t),o.clickCounter=0}),i)}},{key:"throttle",value:function(t,e){var n=this;this.timerId||(this.timerId=setTimeout((function(){t(),n.timerId=void 0}),e))}}])&&n(e.prototype,i),t}();e.Debouncer=i},388:(t,e,n)=>{function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}Object.defineProperty(e,"__esModule",{value:!0}),e.UDrag=void 0;var o=n(515),a=n(589),r=n(975),s=function(){function t(e,n,i){var o=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.uselect=null,this.onMouseMoveFunc=function(t){return o.onMouseMove(t)},this.onMouseUpFunc=function(t){return o.onMouseUp(t)},this.onFocusFunc=function(t){return o.cancelDrag()},this.addUSelect(n),this.state=e,this.options=i,this.instanceId="udrag-".concat(a.newGuid8()),document.addEventListener("mousemove",this.onMouseMoveFunc,!1),document.addEventListener("mouseup",this.onMouseUpFunc,!1),window.addEventListener("focus",(function(t){return o.onFocusFunc}),!1),t.instances.push(this)}var e,n,s;return e=t,s=[{key:"cancelDragAllInstances",value:function(){t.instances.forEach((function(t){return t.cancelDrag()}))}}],(n=[{key:"destroy",value:function(){document.removeEventListener("mousemove",this.onMouseMoveFunc,!1),document.removeEventListener("mouseup",this.onMouseUpFunc,!1),window.removeEventListener("focus",this.onFocusFunc,!1)}},{key:"removeElementsListeners",value:function(t){var e=this;this.uselect&&t.forEach((function(t){return e.uselect.removeListener(t)}))}},{key:"udrag",value:function(t,e){var n=this;t.addEventListener("mousedown",(function(t){return n.onMouseDown(t)}),!1),e&&e.DragHandlerSelectors&&e.DragHandlerSelectors.length>0&&e.DragHandlerSelectors.forEach((function(e){return t.querySelector(e).classList.add("udrag-handler")}))}},{key:"getCurrentUElem",value:function(){return this.currentUElem}},{key:"onExternalDrag",value:function(t){}},{key:"startDraggingExternal",value:function(t){}},{key:"addUSelect",value:function(t){void 0!==t&&(this.uselect=t)}},{key:"onMouseDown",value:function(t){if(1==t.which){var e=t.currentTarget;if(e.id!=t.target.id){if(!t.target.classList.contains("udrag-handler"))return;e=t.target.closest(".udrag")}e.Options.Draggable&&(this.currentUElem=r.UDragger.getNewUElement(e),this.pointOrigin={x:t.pageX,y:t.pageY},this.state.isDragging=!1,this.state.isDragMouseDown=!0,this.currentUElem.Elem.classList.add("is-mouse-down"),this.currentUElem.Elem.classList.remove("is-dragging"),t.preventDefault())}else this.cancelDrag()}},{key:"triggerMouseDown",value:function(t,e,n){}},{key:"onMouseMove",value:function(t){if(!this.state.isResizing&&!this.state.isSelectingBox&&this.state.isDragMouseDown){if(0==t.buttons)return;this.state.isDragging?(this.pointOrigin||console.warn("dragging started with no origin point"),this.onDrag(t,this.currentUElem.Elem)):(this.onDragStart(t),this.state.isDragging=!0,this.currentUElem.Elem.classList.add("is-dragging"))}}},{key:"cancelDrag",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t&&console.log("cancelDrag"),this.currentUElem&&(this.currentUElem.Elem.classList.remove("is-dragging"),this.currentUElem.Elem.classList.remove("is-mouse-down")),this.currentUElem=null,this.state.isDragging=!1,this.state.isDragMouseDown=!1,this.uselect&&this.uselect.updateSelectionOrigins()}},{key:"log",value:function(t){var e=o.toHtml("<div>".concat(t,"</div>"));document.querySelector(".left-section").append(e)}},{key:"onMouseUp",value:function(e){this.state.isDragMouseDown=!1,this.currentUElem&&this.currentUElem.Elem.classList.remove("is-mouse-down"),this.state.isResizing||this.state.isSelectingBox||this.state.isDragging&&(this.onDragEnd(e),t.cancelDragAllInstances())}},{key:"onDragStart",value:function(t){this.state.events&&this.state.events.OnDragStart&&this.state.events.OnDragStart(null,t),null!=this.uselect&&(this.uselect.getSelection().length>1&&this.uselect.isInSelection(this.currentUElem.Elem.id)||this.currentUElem.Elem.Options.Selectable&&this.uselect.selectSingle(this.currentUElem.Elem))}},{key:"onDrag",value:function(t,e){var n=this,i=t.pageX-this.pointOrigin.x,o=t.pageY-this.pointOrigin.y;this.currentUElem.Elem.Options.Selectable?this.uselect.getSelection(!0).forEach((function(t){t.Elem.Options.Draggable&&n.moveElem(t,i,o)})):this.moveCurrElem(i,o)}},{key:"snapValue",value:function(t,e){var n=t%e;return n>=7&&e-n>=7?t:n<e/2?t-n:t-n+e}},{key:"getConstraintPosition",value:function(t,e){return this.options.DragConstraints.ConstraintX&&(e=0),this.options.DragConstraints.ConstraintY&&(t=0),void 0!==this.options.DragConstraints.MinDragX&&t<this.options.DragConstraints.MinDragX&&(t=this.options.DragConstraints.MinDragX),void 0!==this.options.DragConstraints.MinDragY&&e<this.options.DragConstraints.MinDragY&&(e=this.options.DragConstraints.MinDragY),void 0!==this.options.DragConstraints.MaxDragX&&t>this.options.DragConstraints.MaxDragX&&(t=this.options.DragConstraints.MaxDragX),void 0!==this.options.DragConstraints.MaxDragY&&e>this.options.DragConstraints.MaxDragY&&(e=this.options.DragConstraints.MaxDragY),{x:t,y:e}}},{key:"moveElem",value:function(t,e,n){var i=t.PointOrigin.x+e,o=t.PointOrigin.y+n;if(this.options&&this.options.DragConstraints){var a=this.getConstraintPosition(i,o);i=a.x,o=a.y}this.updatePosition(t.Elem,i,o),this.notifyOnMoving(t.Elem)}},{key:"moveCurrElem",value:function(t,e){var n=this.currentUElem.DimensionOrigin.left+t,i=this.currentUElem.DimensionOrigin.top+e;if(this.options&&this.options.DragConstraints){var o=this.getConstraintPosition(n,i);n=o.x,i=o.y}this.updatePosition(this.currentUElem.Elem,n,i),this.notifyOnMoving(this.currentUElem.Elem)}},{key:"getElemSnap",value:function(t,e,n,i){var o=t.PointOrigin.x+e,a=t.PointOrigin.y+n;return{x:o=this.snapValue(o,24),y:a=this.snapValue(a,24)}}},{key:"updatePosition",value:function(t,e,n){t.Options.GridOptions||o.setElemPosition(t,e,n)}},{key:"onDragEnd",value:function(t){this.state.events&&this.state.events.OnDragEnd&&this.state.events.OnDragEnd(null,t),this.notify()}},{key:"notify",value:function(){if(this.state.events&&this.state.events.OnMoved){var t=this.uselect.getSelection().map((function(t){return t.Elem}));this.state.events.OnMoved(t)}}},{key:"notifyOnMoving",value:function(t){this.state.events&&this.state.events.OnMoving&&this.state.events.OnMoving([t])}}])&&i(e.prototype,n),s&&i(e,s),t}();e.UDrag=s,s.instances=[]},975:(t,e,n)=>{function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t){var e="function"==typeof Map?new Map:void 0;return(s=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,i)}function i(){return l(t,arguments,h(this).constructor)}return i.prototype=Object.create(t.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),c(i,t)})(t)}function l(t,e,n){return(l=u()?Reflect.construct:function(t,e,n){var i=[null];i.push.apply(i,e);var o=new(Function.bind.apply(t,i));return n&&c(o,n.prototype),o}).apply(null,arguments)}function u(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.UDragger=e.UWidgetElement=e.UDraggerEvent=void 0;var d,v=n(515),g=n(388);!function(t){t.OnSelected="on_selected",t.OnResized="on_resized",t.OnMoved="on_moved",t.OnAdded="on_added",t.onMoving="on_moving",t.OnDragStart="on_drag_start",t.OnDragEnd="on_drag_start"}(d=e.UDraggerEvent||(e.UDraggerEvent={}));var f=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(o,t);var e,n,i=(e=o,n=u(),function(){var t,i=h(e);if(n){var o=h(this).constructor;t=Reflect.construct(i,arguments,o)}else t=i.apply(this,arguments);return r(this,t)});function o(){return a(this,o),i.apply(this,arguments)}return o}(s(HTMLElement));e.UWidgetElement=f;var p=function(){function t(e,n){var i=this;a(this,t),this.container=e,this.defaultOptions={Draggable:!0,Resizable:!0,Selectable:!0,SelectBox:!0,GridOptions:{Fixed:!1,Visible:!0,GridSize:{Rows:18,Cols:24},CellSize:{Height:120,Width:120},Thickness:5,ConstraintPosition:!0}},this.state={isDragging:!1,isResizing:!1,isDragMouseDown:!1,isSelectingBox:!1,isResizeMouseDown:!1,events:null,container:null},this.defaultOptions=Object.assign(Object.assign({},this.defaultOptions),n),this.state.container=e,this.validateContainer(e),this.udrag=new g.UDrag(this.state,this.uselect,this.defaultOptions),this.defaultOptions.GridOptions&&(this.container.ondragover=function(t){return i.udrag.onExternalDrag(t)},this.container.ondrop=function(t){return i.onDropExternal(t)},document.ondragend=function(t){g.UDrag.cancelDragAllInstances()}),e.onmouseenter=function(t){return e.classList.add("active")},e.onmouseleave=function(t){return e.classList.remove("active")},window.state=this.state}var e,n,i;return e=t,i=[{key:"getNewUElement",value:function(t){return{Elem:t,PointOrigin:{x:t.offsetLeft,y:t.offsetTop},DimensionOrigin:{width:t.offsetWidth,height:t.offsetHeight,left:t.offsetLeft,top:t.offsetTop},HasAncestorInSelection:!1}}},{key:"updateDimensionOrigin",value:function(t){var e=t.Elem;t.DimensionOrigin={width:e.offsetWidth,height:e.offsetHeight,left:e.offsetLeft,top:e.offsetTop}}}],(n=[{key:"getDefaultOptions",value:function(){return this.defaultOptions}},{key:"destroyElements",value:function(t){this.udrag&&this.udrag.removeElementsListeners(t)}},{key:"destroy",value:function(){this.udrag&&this.udrag.destroy(),this.uselect&&this.uselect.destroy()}},{key:"createWidgetElem",value:function(t,e,n){var i=Object.assign(Object.assign({},this.defaultOptions),n),o=v.toHtml(e),a=o;return a.Options=i,a.id=t,o.classList.add("udrag"),a}},{key:"onDropExternal",value:function(t){}},{key:"notifyOnAdded",value:function(){this.state.events&&this.state.events.OnAdded}},{key:"startDragExternal",value:function(t,e,n,i,o){}},{key:"cancelDrag",value:function(){g.UDrag.cancelDragAllInstances()}},{key:"removeResizeHandlers",value:function(t){t.querySelectorAll("[class^=uresize]").forEach((function(t){return t.remove()}))}},{key:"addResizeHandlers",value:function(t){}},{key:"addElemOnlyHandlers",value:function(t,e){var n=t;n.Options=e||this.defaultOptions,t.classList.add("udrag"),n.Options.Draggable?(t.classList.remove("drag-disabled"),this.udrag.udrag(n,n.Options)):t.classList.add("drag-disabled"),n.Options.Resizable?t.classList.remove("resize-disabled"):t.classList.add("resize-disabled"),n.Options.Selectable}},{key:"setDraggerOptions",value:function(t,e){var n=t;e.Draggable?t.classList.add("udrag"):t.classList.remove("udrag"),n.Options=e}},{key:"addElem",value:function(t,e){var n=Object.assign(Object.assign({},this.defaultOptions),e),i=t;return i.Options=n,i.id=t.id,t.classList.add("udrag"),this.container.appendChild(i),this.defaultOptions.Draggable&&this.udrag.udrag(i,e),this.defaultOptions.Selectable,i}},{key:"add",value:function(t,e,n){var i=this.createWidgetElem(t,e,n);return this.container.appendChild(i),this.defaultOptions.Draggable&&this.udrag.udrag(i,n),this.defaultOptions.Selectable,i}},{key:"addByRowCol",value:function(t,e,n,i,o,a,r){var s=this.createWidgetElem(t,e,r);return s.CellRect={Row:n,Col:i,RowLength:o,ColLength:a},this.container.appendChild(s),this.defaultOptions.Draggable&&this.udrag.udrag(s,r),this.defaultOptions.Selectable,s}},{key:"removeById",value:function(t){var e=document.getElementById(t);e.parentNode.removeChild(e)}},{key:"selectMany",value:function(t){}},{key:"select",value:function(t){}},{key:"unselectAll",value:function(){}},{key:"selectAll",value:function(){throw"not implemented"}},{key:"getSelection",value:function(){throw"not implemented"}},{key:"getSelectionUElement",value:function(){throw"not implemented"}},{key:"addEventListener",value:function(t,e){switch(this.state.events||this.createEventsObject(),t){case d.OnAdded:this.state.events.OnAdded=e;break;case d.OnMoved:this.state.events.OnMoved=e;break;case d.OnResized:this.state.events.OnResized=e;break;case d.OnSelected:this.state.events.OnSelected=e;break;case d.onMoving:this.state.events.OnMoving=e;break;case d.OnDragStart:this.state.events.OnDragStart=e;break;case d.OnDragEnd:this.state.events.OnDragEnd=e;break;default:throw Error("UDragger.addEventListener: event: ".concat(t," is not a valid option"))}}},{key:"createEventsObject",value:function(){this.state.events={OnAdded:null,OnMoved:null,OnResized:null,OnSelected:null,OnMoving:null,OnDragStart:null,OnDragEnd:null}}},{key:"validateContainer",value:function(t){if(null==t.id||null==t.id||""==t.id)throw Error("UDragger.validateContainer: container element must have an id")}}])&&o(e.prototype,n),i&&o(e,i),t}();e.UDragger=p},299:(t,e,n)=>{function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}Object.defineProperty(e,"__esModule",{value:!0}),e.QuickModal=void 0;var o=n(515),a=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.info=e,this.create(),document.body.append(this.html)}var e,n;return e=t,(n=[{key:"create",value:function(){if(this.html=o.toHtml("<div class='quick-modal'></div>"),this.html.append(this.info.Content),this.info.Position)o.setElemPosition(this.html,this.info.Position.x,this.info.Position.y);else{var t=document.body.getBoundingClientRect(),e=this.html.getBoundingClientRect();o.setElemPosition(this.html,t.width/2-e.width/2,t.height/2-e.height/2)}}}])&&i(e.prototype,n),t}();e.QuickModal=a},291:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.hslToHsv=e.hsvToHsl=void 0,e.hsvToHsl=function(t,e,n){var i=(2-(e/=100))*(n/=100)/2;return 0!==i&&(e=1===i?0:i<.5?e*n/(2*i):e*n/(2-2*i)),[t,100*e,100*i]},e.hslToHsv=function(t,e,n){e/=100;var i=2*(e*=(n/=100)<.5?n:1-n)/(n+e)*100,o=100*(n+e);return[t,isNaN(i)?0:i,o]}},239:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.dispatch=e.getPoint=void 0,e.getPoint=function(t){return{x:t.clientX,y:t.clientY}},e.dispatch=function(t,e,n,i,o){var a=new Event(e);a.pageX=n,a.pageY=i,a.which=o,Object.defineProperty(a,"currentTarget",{value:t,enumerable:!0}),t.dispatchEvent(a)}},515:(t,e,n)=>{function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}Object.defineProperty(e,"__esModule",{value:!0}),e.elemToRect=e.elemToRectRelativeParent=e.addClassesTo=e.removeClassStartsWith=e.toParentRelativePos=e.getRelativeParentPos=e.cloneObjectJson=e.setElemSize=e.setElemPositionAndSize=e.setElemPosition=e.createElem=e.toHtmlWrapper=e.toHtmlMany=e.toHtml=e.getDataset=e.getDatasets=e.getAttribute=e.getAttributes=e.getIdAttribute=e.getClassAttribute=e.getHtmlAttributes=void 0;var o=n(589);function a(t){return t?" ".concat("class='",t,"'"):""}function r(t,e){return t?" ".concat("id='",t,"'"):e?" ".concat("id='id-",o.newGuid(),"'"):""}function s(t){return t?t.map((function(t){return l(t.Name,t.Value)})).join(" "):""}function l(t,e){return" ".concat(t,"='").concat(e,"'")}function u(t){return t?t.map((function(t){return c(t.Name,t.Value)})).join(" "):""}function c(t,e){return" ".concat("data-",t,"='").concat(e,"'")}e.getHtmlAttributes=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return"".concat(r(t.Id,t.AutoId)).concat(a([t.Classes,e].join(" "))).concat(s(t.Attributes)).concat(u(t.Datasets))},e.getClassAttribute=a,e.getIdAttribute=r,e.getAttributes=s,e.getAttribute=l,e.getDatasets=u,e.getDataset=c,e.toHtml=function(t){var e=document.createElement("div");return e.innerHTML=t.replace(/(\r\n|\n|\r)/gm,"").trim(),e.firstElementChild},e.toHtmlMany=function(t){var e,n=document.createElement("div");return n.innerHTML=t.replace(/(\r\n|\n|\r)/gm,"").trim(),function(t){if(Array.isArray(t))return i(t)}(e=n.children)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(e)||function(t,e){if(t){if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()},e.toHtmlWrapper=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"div",n=document.createElement(e);return n.innerHTML=t.replace(/(\r\n|\n|\r)/gm,"").trim(),1==n.children.length?n.firstElementChild:n},e.createElem=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=document.createElement(t);return e&&(i.id=e),""!==n.trim()&&n.trim().split(" ").forEach((function(t){i.classList.add(t)})),i},e.setElemPosition=function(t,e,n){t.style.left="".concat(e,"px"),t.style.top="".concat(n,"px")},e.setElemPositionAndSize=function(t,e,n,i,o){t.style.left="".concat(e,"px"),t.style.top="".concat(n,"px"),t.style.width="".concat(i,"px"),t.style.height="".concat(o,"px")},e.setElemSize=function(t,e,n){t.style.width="".concat(e,"px"),t.style.height="".concat(n,"px")},e.cloneObjectJson=function(t){return JSON.parse(JSON.stringify(t))},e.getRelativeParentPos=function(t){var e=t.getBoundingClientRect(),n=t.getBoundingClientRect();return{x:n.x-e.x,y:n.y-e.y}},e.toParentRelativePos=function(t,e,n){var i=t.parentElement.getBoundingClientRect();return{x:e-i.x,y:n-i.y}},e.removeClassStartsWith=function(t,e){for(var n=0;n<t.classList.length;n++){var i=t.classList[n];i.startsWith(e)&&t.classList.remove(i)}},e.addClassesTo=function(t,e){t&&t.split(" ").forEach((function(t){return e.classList.add(t)}))},e.elemToRectRelativeParent=function(t){var e=t.getBoundingClientRect(),n=t.parentElement.getBoundingClientRect();return{x:e.left-n.x,y:e.top-n.y,w:e.width,h:e.height}},e.elemToRect=function(t){var e=t.getBoundingClientRect();return{x:e.left,y:e.top,w:e.width,h:e.height}}},589:(t,e)=>{function n(t){return function(t){if(Array.isArray(t))return i(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function o(t){var e=t.match(/(\d+)(?!.*\d)/);return e&&0!=e.length?+e[0]:0}Object.defineProperty(e,"__esModule",{value:!0}),e.extractNumberFromString=e.getNamePrefixTakenList=e.idPrefixConseq=e.newGuid8=e.newGuid=e.getIdCounter=void 0,e.getIdCounter=function(){return window.ConsecutiveId||(window.ConsecutiveId=0),window.ConsecutiveId++},e.newGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)}))},e.newGuid8=function(){return"xxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)}))},e.idPrefixConseq=function(t,e){var i=Math.max.apply(Math,n(e.concat("".concat(t,"-0")).map((function(t){return parseInt(t.split("-")[1])}))));return"".concat(t,"-").concat(i+1)},e.getNamePrefixTakenList=function(t,e){if(!e||0===e.length)return"".concat(t,"1");var i=e.map((function(t){return o(t)})),a=Math.max.apply(Math,n(i))+1;return"".concat(t).concat(a)},e.extractNumberFromString=o}},e={};function n(i){var o=e[i];if(void 0!==o)return o.exports;var a=e[i]={exports:{}};return t[i](a,a.exports,n),a.exports}var i={};(()=>{var t=i;function e(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(515),a=n(239),r=n(589),s=n(291),l=n(975),u=n(201),c=n(299),h=function(){function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.debouncer=new u.Debouncer,this.createColorPickerHtml(),new c.QuickModal({Content:this.html,Position:e}),this.color={H:338,S:20,L:20,A:1},this.updateHSV(),this.drawPalette(this.paletteHtml,this.color),this.paletteWidth=this.paletteHtml.getBoundingClientRect().width,this.paletteHeight=this.paletteHtml.getBoundingClientRect().height;var i=new l.UDragger(this.paletteHtml,{GridOptions:null,Selectable:!1,Resizable:!1,SelectBox:!1,DragConstraints:{MinDragX:-8,MaxDragX:this.paletteWidth-8,MinDragY:-8,MaxDragY:this.paletteHeight-8}});i.addElem(this.dotPaletteHtml),this.paletteHtml.addEventListener("mousedown",(function(t){t.target!=n.dotPaletteHtml&&(o.setElemPosition(n.dotPaletteHtml,t.offsetX-8,t.offsetY-8),n.updatePalette(n.dotPaletteHtml),n.updateTextHSLA(),a.dispatch(n.dotPaletteHtml,"mousedown",t.pageX,t.pageY,1))})),i.addEventListener(l.UDraggerEvent.onMoving,(function(t){n.updatePalette(t[0]),n.updateTextHSLA()})),this.setPaletteDotPosition(this.dotPaletteHtml,this.colorHSVA),this.drawHue(this.hueHtml,this.color),this.hueWidth=this.hueHtml.getBoundingClientRect().width;var r=new l.UDragger(this.hueHtml,{GridOptions:null,Selectable:!1,Resizable:!1,SelectBox:!1,DragConstraints:{ConstraintX:!0,MinDragX:-6,MaxDragX:this.hueWidth-6}});r.addEventListener(l.UDraggerEvent.onMoving,(function(t){n.updateHue(t[0]),n.updateTextHSLA()})),this.hueHtml.addEventListener("mousedown",(function(t){t.target!=n.dotHueHtml&&(o.setElemPosition(n.dotHueHtml,t.offsetX,0),n.updateHue(n.dotHueHtml),n.updateTextHSLA(),a.dispatch(n.dotHueHtml,"mousedown",t.pageX,t.pageY,1))})),r.addElem(this.dotHueHtml),this.setHueDotPosition(this.dotHueHtml,this.colorHSVA),this.drawAlpha(this.alphaHueHtml,this.color);var s=new l.UDragger(this.alphaHueHtml,{GridOptions:null,Selectable:!1,Resizable:!1,SelectBox:!1,DragConstraints:{ConstraintX:!0,MinDragX:-6,MaxDragX:this.hueWidth-6}});s.addEventListener(l.UDraggerEvent.onMoving,(function(t){n.updateAlpha(t[0]),n.updateTextHSLA()})),this.alphaHueHtml.addEventListener("mousedown",(function(t){t.target!=n.dotAlphaHtml&&(o.setElemPosition(n.dotAlphaHtml,t.offsetX,0),n.updateAlpha(n.dotAlphaHtml),n.updateTextHSLA(),a.dispatch(n.dotAlphaHtml,"mousedown",t.pageX,t.pageY,1))})),s.addElem(this.dotAlphaHtml),this.setAlphaDotPosition(this.dotAlphaHtml,this.colorHSVA),this.drawPreview(this.color),this.updateTextHSLA(),this.onInputChange(this.inputHslaH,{min:0,max:360},(function(t){n.color.H=t,n.updateColorComponents()})),this.onInputChange(this.inputHslaS,{min:0,max:100},(function(t){n.color.S=t,n.updateColorComponents()})),this.onInputChange(this.inputHslaL,{min:0,max:100},(function(t){n.color.L=t,n.updateColorComponents()})),this.onInputChange(this.inputHslaA,{min:0,max:1},(function(t){n.color.A=t,n.updateColorComponents()}))}var n,i;return n=t,(i=[{key:"updateColorComponents",value:function(){this.updateHSV(),this.setAlphaDotPosition(this.dotAlphaHtml,this.colorHSVA),this.updateAlpha(this.dotAlphaHtml),this.setHueDotPosition(this.dotHueHtml,this.colorHSVA),this.updateHue(this.dotHueHtml),this.setPaletteDotPosition(this.dotPaletteHtml,this.colorHSVA),this.updatePalette(this.dotPaletteHtml),this.drawPreview(this.color)}},{key:"updateHSV",value:function(){var t=s.hslToHsv(this.color.H,this.color.S,this.color.L);this.colorHSVA={H:t[0],S:t[1],V:t[2],A:this.color.A}}},{key:"updatePalette",value:function(t){var e=o.elemToRectRelativeParent(t);this.colorHSVA.S=this.pixelToValue(100,this.paletteWidth,e.x+8),this.colorHSVA.V=this.pixelToValue(100,this.paletteHeight,this.paletteHeight-(e.y+8));var n=s.hsvToHsl(this.colorHSVA.H,this.colorHSVA.S,this.colorHSVA.V);this.color.H=n[0],this.color.S=n[1],this.color.L=n[2],this.color.S<0&&console.warn("wrong saturation ".concat(this.color.S)),this.drawPreview(this.color),this.drawAlpha(this.alphaHueHtml,this.color)}},{key:"updateHue",value:function(t){var e=o.elemToRectRelativeParent(t);this.color.H=this.pixelToValue(360,this.hueWidth,e.x+6),this.colorHSVA.H=this.color.H,this.drawPalette(this.paletteHtml,this.color),this.drawPreview(this.color),this.drawAlpha(this.alphaHueHtml,this.color)}},{key:"updateAlpha",value:function(t){var e=o.elemToRectRelativeParent(t);this.color.A=this.pixelToValue(1,this.hueWidth,e.x+6),this.colorHSVA.A=this.color.A,this.drawPreview(this.color),this.drawAlpha(this.alphaHueHtml,this.color)}},{key:"pixelToValue",value:function(t,e,n){return n*t/e}},{key:"valueToPixel",value:function(t,e,n){return e*n/t}},{key:"setPaletteDotPosition",value:function(t,e){var n=this.valueToPixel(100,this.paletteWidth,e.S)-8,i=this.paletteHeight-this.valueToPixel(100,this.paletteHeight,e.V)-8;o.setElemPosition(t,n,i)}},{key:"setHueDotPosition",value:function(t,e){var n=this.valueToPixel(360,this.hueWidth,e.H);o.setElemPosition(t,n-6,0)}},{key:"setAlphaDotPosition",value:function(t,e){var n=this.valueToPixel(1,this.hueWidth,e.A);o.setElemPosition(t,n-6,0)}},{key:"drawPalette",value:function(t,e){t.style.background="\n                linear-gradient(to top, rgba(0, 0, 0, 1), transparent),\n                linear-gradient(to left, hsla(".concat(e.H,", 100%, 50%, 1), rgba(255, 255, 255, 1))\n            ")}},{key:"drawHue",value:function(t,e){t.style.background="linear-gradient(90deg,#f00,#ff0,#0f0,#0ff,#00f,#f0f,#f00)"}},{key:"drawAlpha",value:function(t,e){t.style.background="\n                linear-gradient(to right,transparent,hsl(".concat(e.H,", ").concat(e.S,"%, ").concat(e.L,"%))\n            ")}},{key:"updateTextHSLA",value:function(){this.inputHslaH.value="".concat(Math.round(this.color.H)),this.inputHslaS.value="".concat(Math.round(this.color.S)),this.inputHslaL.value="".concat(Math.round(this.color.L)),this.inputHslaA.value="".concat(this.color.A.toFixed(2))}},{key:"drawPreview",value:function(t){var e=o.elemToRectRelativeParent(this.dotPaletteHtml);this.previewHtml.style.backgroundColor="hsla(".concat(t.H,", ").concat(t.S,"%, ").concat(t.L,"%, ").concat(t.A,")"),console.log("hsl",t.H.toFixed(0),t.S.toFixed(0),t.L.toFixed(0),t.A," pt",{x:e.x.toFixed(0),y:e.y.toFixed(0)})}},{key:"createColorPickerHtml",value:function(){this.html=o.toHtml("\n                <div class='ucolor-picker'>\n                    <div id='palette-".concat(r.newGuid8(),"' class='palette'><div class='dot'></div></div>\n                    <div class='panel'>\n                        <div class='preview-group'>\n                            <div class='preview-check'></div>\n                            <div class='preview'></div>\n                        </div>\n                        <div class='slides'>\n                            <div id='hue-").concat(r.newGuid8(),"' class='hue'><div class='dot-hue'></div></div>\n                            <div class='alpha-group'>\n                                <div class='alpha-check'></div>\n                                <div class='alpha-hue' id='alpha-hue-").concat(r.newGuid8(),"'></div>\n                                <div class='dot-alpha'></div>\n                            </div>\n                        </div>\n                    </div>\n                    <div class='text-group'>\n                        <div class='color-field'>\n                            <input type='text' class='input-hsla-h' maxlength=\"4\"'>\n                            <legend>H</legend>\n                            </div>\n                        <div class='color-field'>\n                            <input type='text' class='input-hsla-s' maxlength=\"4\"'>\n                            <legend>S</legend>\n                            </div>\n                        <div class='color-field'>\n                            <input type='text' class='input-hsla-l' maxlength=\"4\"'>\n                            <legend>L</legend>\n                            </div>\n                        <div class='color-field'>\n                            <input type='text' class='input-hsla-a' maxlength=4\"'>\n                            <legend>A</legend>\n                            </div>\n                     </div>\n                </div>")),this.paletteHtml=this.html.querySelector(".palette"),this.hueHtml=this.html.querySelector(".hue"),this.alphaHueHtml=this.html.querySelector(".alpha-hue"),this.dotPaletteHtml=this.html.querySelector(".dot"),this.dotAlphaHtml=this.html.querySelector(".dot-alpha"),this.dotHueHtml=this.html.querySelector(".dot-hue"),this.previewHtml=this.html.querySelector(".preview"),this.inputHslaH=this.html.querySelector(".input-hsla-h"),this.inputHslaS=this.html.querySelector(".input-hsla-s"),this.inputHslaL=this.html.querySelector(".input-hsla-l"),this.inputHslaA=this.html.querySelector(".input-hsla-a")}},{key:"onInputChange",value:function(t,e,n){var i=this;t.addEventListener("input",(function(o){!isNaN(+t.value)&&+t.value>=e.min&&+t.value<=e.max&&i.debouncer.debounce((function(){return n(+t.value)}),500)}))}}])&&e(n.prototype,i),t}();t.default=h})(),upickcolor=i})();